<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File Uploader</title>
</head>
<body>
    <h1>File Uploader</h1>
    <%- include('nav', {url : currentUrl}) %>
    <div class="header">
      <h1 class="title">Home</h1>
      <% if (locals.currentUser) { %>
        <h2>Welcome, <%= locals.currentUser.username %></h2>
      <% } %>
    </div>

    <% for(let i = 0; i < folders.length; i++) { %>
      <div class="folder">
        <button class="folderButton">
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#434343"><path d="M160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h240l80 80h320q33 0 56.5 23.5T880-640v400q0 33-23.5 56.5T800-160H160Zm0-80h640v-400H447l-80-80H160v480Zm0 0v-480 480Z"/></svg>
        </button>
        <p><%= folders[i].foldername %></h2>
      </div>
    <% } %>

    <button class="createFolderButton svgButton"><svg class="createFolder svg" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#434343"><path d="M560-320h80v-80h80v-80h-80v-80h-80v80h-80v80h80v80ZM160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h240l80 80h320q33 0 56.5 23.5T880-640v400q0 33-23.5 56.5T800-160H160Zm0-80h640v-400H447l-80-80H160v480Zm0 0v-480 480Z"/></svg></button>
    <div class="insertedFolderForm"></div>
    <script>
      let open = false;
      const createFolderButton = document.querySelector('.createFolderButton');
      const htmlLocation = document.querySelector('.insertedFolderForm');
      const folderCreationHtml = `<%- folderCreationHtml %>`;
      createFolderButton.addEventListener('click', () => {
        if(!open){
        htmlLocation.innerHTML = folderCreationHtml
        open = true;
        }
        else{
          htmlLocation.innerHTML = ``;
          open = false;
        }
      });
    </script>
    
    
    <br>
    <form action="/fileupload" enctype="multipart/form-data" method="post">
        <div class="form-group">
          <input type="text" class="form-control" placeholder="File Name" name="fileName">
          <input type="file" class="form-control-file" name="uploaded_file">
          <input type="submit" value="Save File" class="btn btn-default">
        </div>
      </form>
</body>
</html>